{"version":3,"sources":["../app/utils/index.js","../app/config/index.js","../app/transformers/index.js","../app/services/cms/index.js","../app/services/cache/index.js","../app/store/Store.js","../app/store/index.js","../app/hooks/use-previous/index.js","../app/hooks/use-force-ssr-load/index.js","../app/hooks/index.js","../app/layout/Header/Header.jsx","../app/layout/Header/index.js","../app/layout/Footer/Footer.jsx","../app/layout/Footer/index.js","../app/layout/Layout/Layout.jsx","../app/layout/Layout/index.js","../app/pages/NotFound/NotFound.jsx","../app/pages/NotFound/index.js","../app/pages/Error/Error.jsx","../app/pages/Error/index.js","../app/components/RawHtml/RawHtml.jsx","../app/components/RawHtml/index.js","../app/pages/Start/Start.jsx","../app/pages/Start/index.js","../app/pages/Page/Page.jsx","../app/pages/Page/index.js","../app/pages/Post/Post.jsx","../app/pages/Post/index.js","../app/blocks/UnknownBlock/UnknownBlock.jsx","../app/blocks/UnknownBlock/index.js","../app/blocks/BlurbFull/BlurbFull.jsx","../app/blocks/BlurbFull/index.js","../app/blocks/BlurbBg/BlurbBg.jsx","../app/blocks/BlurbBg/index.js","../app/layout/Blocks/Blocks.jsx","../app/layout/Blocks/index.js","../app/pages/Recipe/Recipe.jsx","../app/pages/Recipe/index.js","../app/pages/RecipeList/RecipeList.jsx","../app/pages/RecipeList/index.js","../app/pages/RecipeListCategoryListing/RecipeListCategoryListing.jsx","../app/pages/RecipeListCategoryListing/index.js","../app/App.jsx","lib/ssr/index.js","index.js"],"names":["defined","obj","definedNotNull","isFn","fn","isArray","a","Array","isObj","isStr","debugState","debug","msg","console","warn","undefined","runningInBrowser","process","env","BABEL_ENV","runningOnServer","isDevEnv","NODE_ENV","range","args","start","end","length","from","v","k","reverse","x","xs","flatten","zip","arr","arrs","map","val","i","reduce","random","max","min","Math","pluckRandom","parseInt","generalConfig","cacheTtl","devDefaultConfig","wpHome","appBase","wpInjectedConfig","window","__FROJD_SETTINGS","config","routeTransformer","routes","deep","transformToRelativeUrl","item","ignoreUrlsWith","newItem","abort","filter","fileType","indexOf","replace","menuTransformer","menuData","menu","items","forEach","update","featuredImageTransformer","data","imageData","imageSizeTransformer","imageSizes","Object","keys","sizes","size","file","width","height","url","sourceUrl","slug","title","rendered","altText","caption","mimeType","mediaDetails","taxonomyTermTransformer","terms","newTerms","fixedTerms","term","tax","push","taxonomyCategoryTransformer","category","id","count","name","description","taxonomy","pageDataTransformer","featuredImage","taxonomies","keysToRemove","pageData","newData","key","excerpt","content","base","authConfig","nonce","withCredentials","headers","endpoints","primaryMenu","media","date","page","post","cpt","type","pages","posts","cpts","pagesInCategory","categoryName","categoryId","postsInCategory","cptsInCategory","pageRevisions","pageRevision","revisionId","postRevisions","postRevision","cptRevisions","cptRevision","taxonomyCategories","taxonomyCategory","taxonomyCategorySlug","getRoutes","resp","axios","get","transformers","getPrimaryMenu","getMedia","getDate","getContent","getPages","getPagesInCategory","taxonomyName","getRevisions","getRevision","getContentPreview","previewMediaId","revs","Promise","all","getTaxonomyCategories","categories","getTaxonomyCategory","getTaxonomyCategorySlug","defaultTtl","currentTtl","entries","now","Date","getTime","setTtl","ttl","remove","hasKey","entry","timestamp","set","value","Store","constructor","initialState","states","error","loading","ready","serverSideBootstrapped","locationChanged","currentQuery","wpRestNonce","isLoggedIn","enforceActions","assign","cache","updateQueryParams","bootstrap","wpLoggedIn","loadRoutes","loadPrimaryMenu","state","setLocationChanged","bool","setServerSideBootstrapped","setQueryParams","params","hasQueryParams","hasPreviewQuery","queryString","parse","location","search","getError","stack","message","getRouteByComponentName","foundRoutes","route","component","cms","loadContentAndInitialProps","urlParams","getInitialProps","observable","object","pageInitialProps","loadingPageAndProps","loadContent","loadContentPreview","loadInitialProps","mediaId","props","pageQuery","action","defaultStore","storeContext","React","createContext","StoreProvider","store","children","__store","MockStoreProvider","dehydrate","base64","encode","rehydrate","storeJson","JSON","decode","useStore","useContext","Error","__FROJD_STATE","usePrevious","ref","current","useForceSsrLoad","didReload","setDidReload","r","Header","Footer","Layout","NotFound","defaultProps","code","RawHtml","html","__html","Start","initialProps","thumbnail","Page","willReload","Post","UnknownBlock","missingComponentId","BlurbFull","image","link","BlurbBg","backgroundImage","blockComponents","Blocks","block","acfFcLayout","Block","Recipe","recipeScore","recipeCategory","blocks","cat","RecipeList","recipes","recipeCategories","recipesBycategoryUrl","recipe","RecipeListCategoryListing","categorySlug","categoryPages","parentUrl","routeOptions","pageComponents","updateWpAdminBarEditButtonWithId","pageId","wrapEl","document","getElementById","linkEl","getElementsByTagName","editUrl","href","editRegex","match","updatedEditUrl","LocationSwitch","prevProps","pathname","App","ssr","renderRoute","PageComponent","contentPromise","postType","componentAcceptsUrlParams","path","forwardRef","ssrRenderer","req","res","originalUrl","appRef","context","helmetContext","query","app","ReactDOMServer","renderToString","writeHead","Location","send","port","PORT","server","serveStatic","express","static","use","resolve","cwd","listen","log","info"],"mappings":"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","file":"index.js","sourceRoot":"../../server","sourcesContent":["// helpers\n\nconst defined = obj => typeof obj !== 'undefined';\nconst definedNotNull = obj => defined(obj) && obj != null;\nconst isFn = fn => typeof fn === 'function';\nconst isArray = a => Array.isArray(a);\nconst isObj = obj => typeof obj === 'object';\nconst isStr = obj => typeof obj === 'string';\n\nlet debugState = true;\nconst debug = (...msg) => debugState \n    ? console.warn(...msg)\n    : undefined; \n\nconst runningInBrowser = () => \n    process.env.BABEL_ENV === 'client';\n\nconst runningOnServer = () => \n    process.env.BABEL_ENV === 'server';\n\nconst isDevEnv = () => \n    process.env.NODE_ENV === 'development'; \n\n// ranges\n\nconst range = (...args) => {\n    let [start, end] = args.length == 2\n        ? args\n        : [0, args[0]];\n\n    return Array.from({length: (end - start)},\n        (v, k) => k + start\n    );\n}\n\n// array manipulation\n\nconst reverse = ([x, ...xs]) => typeof x !== 'undefined'\n    ? [...reverse(xs), x]\n    : [];\n\nconst flatten = ([x, ...xs]) => typeof x !== 'undefined'\n    ? Array.isArray(x)\n        ? [...flatten(x), ...flatten(xs)]\n        : [x, ...flatten(xs)]\n    : [];\n\nconst zip = (arr, ...arrs) =>\n    arr.map((val, i) =>\n        arrs.reduce((a, arr) =>\n            [...a, arr[i]], [val]\n        )\n    );\n\n// random no stuff\n\nconst random = (max = 1, min) => {\n    if(defined(min)) { \n        [min, max] = [max, min];\n    } else { \n        min = 0;\n    }\n\n    return Math.random() * (max - min) + min;\n}\n\nconst pluckRandom = (arr) =>\n    arr[parseInt(random(arr.length))];\n\nexport {\n    defined,\n    definedNotNull,\n    isFn,\n    isArray,\n    isObj,\n    isStr,\n    debug,\n    runningInBrowser,\n    runningOnServer, \n    isDevEnv,\n    range,\n    reverse,\n    zip,\n    flatten,\n    random,\n    pluckRandom\n};\n","import { \n    debug,\n    runningInBrowser,\n    runningOnServer,\n    isDevEnv\n} from '../utils';\n\nconst generalConfig = {\n    cacheTtl: 10 * 1000\n}\n\nconst devDefaultConfig = {\n    wpHome: 'http://repress.dev.test:8880',\n    appBase: runningOnServer() && isDevEnv()\n        ? 'http://web'\n        : 'http://repress.dev.test:8880',\n};\n\nconst wpInjectedConfig = runningInBrowser() && window.__FROJD_SETTINGS\n    ? window.__FROJD_SETTINGS\n    : {};\n\nconst config = {\n    ...generalConfig, \n    ...devDefaultConfig,\n    ...wpInjectedConfig\n};\n\ndebug('Loaded config: ', config);\n\nexport default config; ","import camelcaseKeys from 'camelcase-keys';\nimport traverse from 'traverse';\n\nimport { \n    isStr,\n    isArray, \n    flatten,\n} from '../utils';\n\nimport config from '../config';\n\nconst routeTransformer = (routes) => {\n    return camelcaseKeys(routes, { deep: true });\n};\n\n// transform any absolute url containing WP_HOME to a relative url\nconst transformToRelativeUrl = (item) => {\n    const ignoreUrlsWith = ['.png', '.jpg', '.jpeg', '.svg', '.gif', '.webp', '.ico'];\n\n    let newItem = item; \n\n    if (isStr(item)) {\n        const abort = ignoreUrlsWith\n            .filter(fileType => item.indexOf(fileType) > -1)\n            .length > 0;\n        \n        if (!abort && item.indexOf('http') > -1) {\n            newItem = item.replace(config.wpHome, '')\n        }\n    }\n\n    return newItem; \n}\n\nconst menuTransformer = (menuData) => {\n    let menu = camelcaseKeys(menuData, { deep: true });\n\n    traverse(menu.items)\n        .forEach(function(item) {\n            this.update(transformToRelativeUrl(item));\n        });\n\n    return menu;  \n};\n\nconst featuredImageTransformer = (data) => {\n    const imageData = camelcaseKeys(data, { deep: true });\n    if(!('mediaDetails' in imageData)) {\n        return null; \n    }\n\n    const imageSizeTransformer = (imageSizes) => \n        Object.keys(imageSizes)\n            .reduce((sizes, size, i) => {\n                sizes[size] = {\n                    file: imageSizes[size].file,\n                    width: imageSizes[size].width, \n                    height: imageSizes[size].height, \n                    url: imageSizes[size].sourceUrl\n                }; \n\n                return sizes; \n            }, {}); \n\n    return {\n        slug: imageData.slug, \n        title: imageData.title.rendered,\n        altText: imageData.altText, \n        caption: imageData.caption.rendered,\n        mimeType: imageData.mimeType,\n        sizes: imageSizeTransformer(imageData.mediaDetails.sizes)\n    }\n}\n\nconst taxonomyTermTransformer = (terms) => {\n    const newTerms = flatten(terms)\n        .reduce((fixedTerms, term) => {\n            const tax = term['taxonomy'];\n\n            if(!(tax in fixedTerms)) {\n                fixedTerms[tax] = []; \n            }\n\n            fixedTerms[tax].push(term);\n\n            return fixedTerms; \n        }, {});\n\n    return camelcaseKeys(newTerms);\n};\n\nconst taxonomyCategoryTransformer = (category) => {\n    return {\n        id: category.id, \n        count: category.count, \n        name: category.name, \n        slug: category.slug, \n        description: category.description,\n        taxonomy: category.taxonomy\n    }\n};\n\n// this function will remove all wp post props except those we need and convert all keys to camel case, \n// the final object will look something like this: \n// \n// {\n//     id,\n//     date,\n//     dateGmt,\n//     modified,\n//     modifiedGmt,\n//     slug,\n//     status, \n//     type, \n//     url, \n//     author, \n//     title, \n//     excerpt, \n//     content,\n//     featuredImage,\n//     ...\n//     <registered acf properties in camel case if available> \n// }\n\nconst pageDataTransformer = (data) => {    \n    const featuredImage = data['_embedded'] && data['_embedded']['wp:featuredmedia']\n        ? featuredImageTransformer(data['_embedded']['wp:featuredmedia'][0])\n        : null;\n\n    const taxonomies = data['_embedded'] && data['_embedded']['wp:term']\n        ? taxonomyTermTransformer(data['_embedded']['wp:term'])\n        : null; \n\n    const keysToRemove = ['guid', 'featured_media', 'template', '_links', 'link', '_embedded']; \n\n    let pageData = Object.keys(data)\n        .reduce((newData, key) => {\n            if (keysToRemove.indexOf(key) === -1 && data[key]) {\n                // don't include empty arrays \n                if (isArray(data[key]) && data[key].length === 0) {\n                    return newData; \n                }\n\n                newData[key] = data[key];\n                \n                traverse(newData[key]).forEach(function (item) {\n                    this.update(transformToRelativeUrl(item));\n                });\n            }\n\n            return newData; \n        }, {});\n\n    pageData = {\n        ...camelcaseKeys(pageData, { deep: true }), \n        ...taxonomies,\n        title: data.title.rendered, \n        excerpt: data.excerpt.rendered, \n        content: data.content.rendered,\n        featuredImage,\n    };\n\n    return pageData; \n};\n\nexport {\n    routeTransformer,\n    menuTransformer,\n    featuredImageTransformer,\n    taxonomyCategoryTransformer,\n    pageDataTransformer\n}","import * as transformers from '../../transformers';\n\nimport config from '../../config';\nimport { \n    defined,\n    debug \n} from '../../utils';\n\nimport axios from 'axios';\n\nconst base = `${config.appBase}/wp-json`;\n\n// include auth cookies & wp nonce with req \nconst authConfig = (nonce) => ({\n    withCredentials: true, \n    headers: {\n        'X-WP-Nonce': nonce,\n        'Cache-Control': 'no-store'\n    }\n});\n\nconst endpoints = {\n    routes: () => \n        `${base}/router/v1/all/`,\n    primaryMenu: () =>\n        `${base}/menus/v1/menus/primary_navigation`,\n    media: (id) =>\n        `${base}/wp/v2/media/${id}`,\n    date: () =>\n        `${base}/date`,\n\n    page: (id) => \n        `${base}/wp/v2/pages/${id}?_embed`,\n    post: (id) =>\n        `${base}/wp/v2/posts/${id}?_embed`,\n    cpt: (id, type) => \n        `${base}/wp/v2/${type}/${id}?_embed`,\n\n    pages: () =>\n        `${base}/wp/v2/pages?_embed`,\n    posts: () =>\n        `${base}/wp/v2/posts?_embed`,\n    cpts: (type) =>\n        `${base}/wp/v2/${type}?_embed`,\n\n    pagesInCategory: (categoryName, categoryId) =>\n        `${base}/wp/v2/pages?_embed${categoryName}=${categoryId}`,\n    postsInCategory: (categoryName, categoryId) =>\n        `${base}/wp/v2/posts?_embed${categoryName}=${categoryId}`,\n    cptsInCategory: (type, categoryName, categoryId) =>\n        `${base}/wp/v2/${type}?_embed&${categoryName}=${categoryId}`,\n\n    pageRevisions: (id) => \n        `${base}/wp/v2/pages/${id}/revisions?filter[orderby]=date&order=desc`,\n    pageRevision: (id, revisionId) =>\n        `${base}/wp/v2/pages/${id}/revisions/${revisionId}?_embed`,\n\n    postRevisions: (id) =>\n        `${base}/wp/v2/posts/${id}/revisions?filter[orderby]=date&order=desc`,\n    postRevision: (id, revisionId) =>\n        `${base}/wp/v2/posts/${id}/revisions/${revisionId}?_embed`,\n\n    cptRevisions: (id, type) =>\n        `${base}/wp/v2/${type}/${id}/revisions?filter[orderby]=date&order=desc`,\n    cptRevision: (id, type, revisionId) =>\n        `${base}/wp/v2/${type}/${id}/revisions/${revisionId}?_embed`,\n\n    taxonomyCategories: (name) => \n        `${base}/wp/v2/${name}`,\n    taxonomyCategory: (name, id) =>\n        `${base}/wp/v2/${name}/${id}`,\n    taxonomyCategorySlug: (name, slug) =>\n        `${base}/wp/v2/${name}?slug=${slug}`,\n};\n\ndebug('CMS Service: using base: ', base);\n\nconst getRoutes = async () => {\n    const resp = await axios.get(endpoints.routes());\n    return transformers\n        .routeTransformer(resp.data);\n}\n\nconst getPrimaryMenu = async () => {\n    const resp = await axios.get(endpoints.primaryMenu());\n    return transformers\n        .menuTransformer(resp.data);\n}\n\nconst getMedia = async (id, nonce) => {\n    debug('CMS getMedia() called!');\n    debug('CMS getMedia() nonce: ', nonce);\n    debug('CMS getMedia() media id: ', id);\n\n    const resp = await axios.get(endpoints.media(id), authConfig(nonce));\n    debug('CMS getMedia() transformed data: ', transformers.featuredImageTransformer(resp.data));\n\n    return transformers\n        .featuredImageTransformer(resp.data) \n}\n\nconst getDate = async () => {\n    return await axios.get(endpoints.date());\n}\n\nconst getContent = async (id, type) => {\n    let resp; \n\n    debug('CMS getContent(): fetching content for id: ', id);\n\n    switch(type) {\n        case 'page':\n            resp = await axios.get(endpoints.page(id));\n            break;\n        case 'post':\n            resp = await axios.get(endpoints.post(id));\n            break;\n        default: \n            resp = await axios.get(endpoints.cpt(id, type));\n            break;\n    }\n\n    return transformers\n        .pageDataTransformer(resp.data);\n}\n\nconst getPages = async (type) => {\n    let resp; \n\n    debug('CMS getPages(): fetching pages of type: ', type);\n\n    switch(type) {\n        case 'page':\n            resp = await axios.get(endpoints.pages());\n            break;\n        case 'post':\n            resp = await axios.get(endpoints.posts());\n            break;\n        default: \n            resp = await axios.get(endpoints.cpts(type));\n            break;\n    }\n\n    return resp.data.map(data => \n        transformers.pageDataTransformer(data)\n    ); \n}\n\nconst getPagesInCategory = async (type, taxonomyName, categoryId) => {\n    let resp;\n\n    debug('CMS getPagesInCategory(): fetching pages of type: ', type);\n\n    switch (type) {\n        case 'page':\n            resp = await axios.get(endpoints.pagesInCategory(type, taxonomyName, categoryId));\n            break;\n        case 'post':\n            resp = await axios.get(endpoints.postsInCategory(type, taxonomyName, categoryId));\n            break;\n        default:\n            resp = await axios.get(endpoints.cptsInCategory(type, taxonomyName, categoryId));\n            break;\n    }\n\n    return resp.data.map(data =>\n        transformers.pageDataTransformer(data)\n    ); \n}\n\n\nconst getRevisions = async (id, type, nonce) => {\n    let resp;\n    \n    switch (type) {\n        case 'page':\n            resp = await axios.get(endpoints.pageRevisions(id), authConfig(nonce));\n            break;\n        case 'post':\n            resp = await axios.get(endpoints.postRevisions(id), authConfig(nonce));\n            break;\n        default:\n            resp = await axios.get(endpoints.cptRevisions(id, type), authConfig(nonce));\n            break;\n    }\n\n    debug('CMS getRevisions(): fetched revision list for id: ', id, resp.data);\n\n    return resp.data; \n}\n\nconst getRevision = async (id, type, revisionId, nonce) => {\n\n    debug('CMS getRevision(): fetching revision content for id: ', id);\n\n    let resp;\n    switch (type) {\n        case 'page':\n            resp = await axios.get(endpoints.pageRevision(id, revisionId), authConfig(nonce));\n            break;\n        case 'post':\n            resp = await axios.get(endpoints.postRevision(id, revisionId), authConfig(nonce));\n            break;\n        default:\n            resp = await axios.get(endpoints.cptRevision(id, type, revisionId), authConfig(nonce));\n            break;\n    }\n\n    return transformers\n        .pageDataTransformer(resp.data);\n}\n\nconst getContentPreview = async (id, type, previewMediaId, nonce) => {\n    let pageData = {}, featuredImage = {}, revs = {};\n\n    debug('CMS getContentPreview() called!');\n    debug('CMS getContentPreview() nonce: ', nonce); \n    debug('CMS getContentPreview() preview media id: ', previewMediaId); \n\n    revs = await getRevisions(id, type, nonce);\n    debug('CMS: received post revision list: ', revs);\n\n    [featuredImage, pageData] = await Promise.all([\n        previewMediaId > -1\n            ? getMedia(previewMediaId, nonce)\n            : undefined, \n        getRevision(id, type, revs[0].id, nonce)\n    ]);\n\n    debug('CMS: getContentPreview() - received preview media data: ', featuredImage);\n\n    return {\n        ...pageData, \n        featuredImage\n    }\n}\n\nconst getTaxonomyCategories = async (name) => {\n    let resp = await axios.get(endpoints.taxonomyCategories(name));\n\n    const categories = resp.data.map(category => \n        transformers.taxonomyCategoryTransformer(category)\n    );\n\n    debug('CMS getTaxonomyCategories(): received categories: ', categories);\n\n    return categories;\n}\n\nconst getTaxonomyCategory = async (name, id) => {\n    let resp = await axios.get(endpoints.taxonomyCategory(name, id));\n    return transformers\n        .taxonomyCategoryTransformer(resp.data);\n}\n\nconst getTaxonomyCategorySlug = async (name, slug) => {\n    let resp = await axios.get(endpoints.taxonomyCategorySlug(name, slug));\n    return transformers\n        .taxonomyCategoryTransformer(resp.data[0]);\n}\n\nexport {\n    getDate,\n\n    getRoutes,\n    getPrimaryMenu,\n    getMedia, \n    \n    getContent, \n    getPages,\n    getContentPreview,\n\n    getPagesInCategory,\n    getTaxonomyCategories,\n    getTaxonomyCategory,\n    getTaxonomyCategorySlug\n}","import { debug } from '../../utils';\n\nconst defaultTtl = 10 * 1000;\nlet currentTtl = defaultTtl; \n\nlet entries = {}; \n\nconst now = () => \n    new Date().getTime(); \n\nconst setTtl = (ttl) => {\n    debug(`Cache: setting cache ttl to ${ttl}ms`);\n    currentTtl = ttl; \n}\n\nconst remove = (key) =>\n    entries = Object.keys(entries)\n        .reduce((obj, k) => {\n            if (k !== key) {\n                obj[k] = entries[k]\n            }\n\n            return obj;\n        }, {}); \n\nconst hasKey = (key) => {\n    if(!(key in entries)) {\n        return false; \n    }\n\n    const entry = entries[key];\n\n    if (now() - entry.timestamp > currentTtl) {\n        debug(`Cache: entry with key \"${key}\" has expired`);\n        remove(key);\n\n        return false;\n    }\n\n    return true; \n}\n\nconst set = (key, value) => \n    entries = {\n        ...entries, \n        [key]: {\n            value, \n            timestamp: now()\n        }\n    };\n\nconst get = (key) => {\n    if (!(key in entries)) {\n        return null;\n    }\n\n    const entry = entries[key];\n\n    if (now() - entry.timestamp > currentTtl) {\n        debug(`Cache: entry with key \"${key}\" has expired`);\n        remove(key);\n        return null; \n    }\n\n    debug(`Cache: found entry with key \"${key}\", time left: `, now() - entry.timestamp);\n\n    return entry.value; \n};\n\nexport {\n    setTtl, \n    hasKey, \n    set, \n    remove,\n    get\n}","import {\n    observable,\n    action,\n    runInAction,\n    set,\n    configure as configureStore,\n} from 'mobx';\n\nimport queryString from 'query-string';\n\nimport { \n    defined,\n    isFn, \n    isStr,\n    isObj,\n    runningInBrowser,\n    debug\n} from '../utils';\n\nimport config from '../config';\n\nimport * as cms from '../services/cms';\nimport * as cache from '../services/cache';\n\n\nclass Store {\n    debug = true; \n\n    states = {\n        error: 'error',\n        loading: 'loading',\n        ready: 'ready'\n    };\n\n    constructor(initialState) {\n        configureStore({\n            enforceActions: 'always'\n        });\n\n        runInAction(() => {\n            Object.assign(this, initialState || {});\n        });\n\n        cache.setTtl(config.cacheTtl);\n        this.updateQueryParams(); \n    }\n\n    // main ui state\n    @observable state = this.states.loading;\n    @observable error = null; \n\n    // global state\n    serverSideBootstrapped = false; \n    locationChanged = false; \n    currentQuery = {};\n    wpRestNonce = {};\n    isLoggedIn = false; \n\n    @observable routes = [];\n    @observable primaryMenu = {}; \n\n    // current page state \n    @observable loadingPageAndProps = false; \n    @observable pageData = observable.object({});\n    @observable pageInitialProps = observable.object({}); \n\n    @action \n    async bootstrap() {\n        debug('Store: bootstrapping!');\n\n        if (runningInBrowser() && defined(window.__FROJD_SETTINGS)) {\n            this.wpRestNonce = window.__FROJD_SETTINGS.wpRestNonce;\n            this.isLoggedIn = window.__FROJD_SETTINGS.wpLoggedIn;\n\n            debug('Store: is logged in to WP: ', this.isLoggedIn);\n            debug('Store: using injected wp rest nonce: ', this.wpRestNonce);\n        }\n\n        await Promise.all([\n            this.loadRoutes(),\n            this.loadPrimaryMenu()\n        ]);\n\n        debug('Store: loaded routes & menus!');\n\n        runInAction(() => {\n            this.state = this.states.ready; \n        });\n    }\n\n    // getters / setters \n\n    setLocationChanged(bool) {\n        this.locationChanged = bool; \n    } \n\n    setServerSideBootstrapped(bool) {\n        this.serverSideBootstrapped = bool; \n    }\n\n    setQueryParams(params) {\n        debug('Store: setting query params to: ', params);\n        this.currentQuery = params;\n    }\n\n    hasQueryParams() {\n        return Object.keys(this.currentQuery)\n            .length > 0; \n    }\n\n    hasPreviewQuery() {\n        return this.hasQueryParams() \n            && 'preview' in this.currentQuery \n            && this.currentQuery['preview'] === 'true'; \n    }\n\n    updateQueryParams() {\n        if (runningInBrowser()) {\n            this.setQueryParams(\n                queryString.parse(window.location.search)\n            );\n        }\n    }\n\n    getError() {\n        if(isStr(this.error)) {\n            return this.error; \n        }\n\n        if(isObj(this.error) && 'stack' in this.error) {\n            return this.error.stack; \n        }\n\n        if (isObj(this.error) && 'message' in this.error) {\n            return this.error.message; \n        }\n\n        return null; \n    }\n\n    getRouteByComponentName(name) {\n        const foundRoutes = this.routes.filter(route => \n            route.component === name\n        );\n\n        return foundRoutes.length \n            ? foundRoutes[0].url\n            : null; \n    }\n\n    // actions\n\n    @action\n    async loadRoutes() {\n        try {\n            const routes = await cms.getRoutes();\n\n            runInAction(() => {\n                this.routes = routes;\n            });\n\n        } catch (error) {\n            runInAction(() => {\n                this.state = this.states.error;\n                this.error = error; \n            });\n        }\n    }\n\n    @action\n    async loadPrimaryMenu() {\n        try {\n            const menu = await cms.getPrimaryMenu();\n\n            runInAction(() => {\n                this.primaryMenu = menu;\n            });\n        } catch (error) {\n            runInAction(() => {\n                this.state = this.states.error;\n                this.error = error; \n            });\n        }\n    }\n\n    @action\n    async loadContentAndInitialProps(id, type, urlParams, getInitialProps) {\n        this.updateQueryParams(); \n\n        debug('Store: loadContentAndInitialProps() called - loading content and initial props');\n        debug('Store: current query params: ', this.currentQuery);\n\n        // clear page data \n        // (in order to not render incorrect data on new page while new page data is loading)\n        this.pageData = observable.object({}); \n        debug('Store: cleared pageData'); \n\n        // clear initial props\n        // (in order to not render incorrect data on new page while new page props are loading)\n        this.pageInitialProps = observable.object({}); \n        debug('Store: cleared pageInitialProps'); \n\n        this.loadingPageAndProps = true; \n\n        const loadContent = () => this.hasPreviewQuery()\n            ? this.loadContentPreview(id, type)\n            : this.loadContent(id, type);\n\n        const loadInitialProps = () => isFn(getInitialProps)\n            ? this.loadInitialProps(getInitialProps, urlParams)\n            : undefined;\n\n        await Promise.all([\n            loadContent(), \n            loadInitialProps()\n        ]); \n\n        runInAction(() => {\n            this.loadingPageAndProps = false\n        }); \n    }\n    \n    @action\n    async loadContent(id, type) {\n        debug('Store: loadContent() called - loading page data '); \n\n        if(cache.hasKey(id)) {\n            set(this.pageData, cache.get(id));\n            debug('Store: loadContent() - page data found in cache, returning cached data');\n            return;\n        }\n\n        try {\n            const content = await cms.getContent(id, type);\n\n            runInAction(() => {\n                cache.set(id, content);\n                set(this.pageData, content);\n\n                debug('Store: set pageData: ', this.pageData);\n            });\n\n        } catch (error) {\n            runInAction(() => {\n                this.state = this.states.error;\n                this.error = error; \n            });\n        }\n    }\n\n    @action\n    async loadContentPreview(id, type) {\n        const mediaId = '_thumbnail_id' in this.currentQuery\n            ? this.currentQuery['_thumbnail_id']\n            : -1; \n            \n        debug('Store: loadContentPreview() called - loading PREVIEW page data ');\n        debug('Store: loadContentPreview() - will load featured media preview with media id: ', mediaId);\n\n        try {\n            const content = await cms.getContentPreview(id, type, mediaId, this.wpRestNonce);\n\n            runInAction(() => {\n                debug('Store: setting PREVIEW pageData: ', this.pageData);\n                set(this.pageData, content);\n            });\n\n        } catch (error) {\n            runInAction(() => {\n                debug('Store: loadContentPreview() FAILED, reason: ', error);\n\n                this.state = this.states.error;\n                this.error = error; \n            });\n        }\n    } \n\n    @action \n    async loadInitialProps(getInitialProps, urlParams) {\n        debug('Store: loadInitialProps() called - loading props!');\n\n        try {\n            const props = await getInitialProps({\n                urlParams, \n                pageQuery: this.currentQuery\n            });\n\n            debug('Store: fetched initial props!');\n\n            runInAction(() => {\n                set(this.pageInitialProps, props);\n            }); \n        } catch (error) {\n            runInAction(() => {\n                this.state = this.states.error;\n                this.error = error; \n            });\n        }\n    }\n}\n\nexport default Store;\n","import React from 'react';\n\nimport { toJS } from 'mobx';\nimport jsonStringifySafe from 'json-stringify-safe';\nimport * as base64 from 'base64util';\n\nimport { \n    definedNotNull,\n    debug,\n    runningInBrowser\n} from '../utils';\n\nimport Store from './Store';\n\n\nlet defaultStore = new Store(); \nconst storeContext = React.createContext();\n\n\nconst StoreProvider = ({ store, children }) => {\n    const __store = definedNotNull(store)\n        ? store \n        : defaultStore; \n\n    return (\n        <storeContext.Provider value={__store}>\n            {children}\n        </storeContext.Provider>\n    );\n}\n\nconst MockStoreProvider = ({ store, children }) => {\n    return (\n        <storeContext.Provider value={store}>\n            {children}\n        </storeContext.Provider>\n    );\n}\n\n\nconst dehydrate = (store) => {\n    return base64.encode(jsonStringifySafe(toJS(store, true)));\n};\n\nconst rehydrate = (storeJson) => {\n    return JSON.parse(base64.decode(storeJson));\n}\n\n\nconst useStore = () => {\n    const store = React.useContext(storeContext);\n\n    if (!store) {\n        throw new Error('You\\'ve forgotten to use <StoreProvider/>, well shame on you...');\n    }\n\n    return store;\n}\n\n// hydrate ssr \nif (runningInBrowser() && definedNotNull(window.__FROJD_STATE)) {\n    let state = rehydrate(window.__FROJD_STATE);\n    defaultStore = new Store(state);\n\n    debug('Hydrated store with state: ', state);\n} else if (runningInBrowser()) { // ssr failed/not available, start bootstrap\n    debug('Could not find dehydrated state, bootstrapping store!');\n    defaultStore.bootstrap();\n}\n\nexport {\n    Store,\n    StoreProvider,\n    MockStoreProvider,\n    useStore,\n    dehydrate, \n    rehydrate\n}\n","import { \n    useRef,\n    useEffect\n } from 'react';\n\n// compare current & prev. props \nfunction usePrevious(value) {\n    const ref = useRef();\n\n    useEffect(() => {\n        ref.current = value;\n    }, [value]);\n\n    return ref.current;\n}\n\nexport default usePrevious; ","import { useState } from 'react';\nimport queryString from 'query-string';\n\nimport { useStore } from '../../store';\nimport { \n    debug,\n    runningInBrowser\n} from '../../utils';\n\nfunction useForceSsrLoad() {\n    const store = useStore(); \n    const [didReload, setDidReload] = useState(false);\n\n    if (runningInBrowser() && store.serverSideBootstrapped) {\n        const { r } = queryString.parse(window.location.search);\n        if(!r && !didReload && store.locationChanged) {\n            debug('useForceSsrLoad() hook: page not yet reloaded - reloading!');\n\n            setDidReload(true);\n            window.location = `${window.location}?r=true`; \n\n            return true; \n        }\n\n        if (!r && didReload) {\n            return true; \n        }\n    }\n\n    debug('useForceSsrLoad() hook: NOT reloading!');\n    return false; \n}\n\n\nexport default useForceSsrLoad; \n","import usePrevious from './use-previous';\nimport useForceSsrLoad from './use-force-ssr-load';\n\nexport {\n    usePrevious,\n    useForceSsrLoad,\n}","\nimport React from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\nimport { useStore } from '../../store';\n\nimport './Header.scss';\n\nconst Header = observer(() => {\n    let store = useStore();\n\n    return (\n        <header\n            className=\"Header\"\n        >\n            {store.primaryMenu && store.primaryMenu.items.map((item, i) => (\n                <Link \n                    className=\"Header__Link\"\n                    key={i} \n                    to={item.url}\n                >\n                    {item.title}\n                </Link>\n            ))}\n        </header>\n    );\n}); \n\nexport default Header; ","import Header from './Header';\nexport default Header; ","\nimport React from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\n\nimport './Footer.scss';\n\nconst Footer = observer(() => {\n\n    return (\n        <footer\n            className=\"Footer\"\n        >   \n            A small footer (c) 2019\n        </footer>\n    );\n});\n\nexport default Footer; ","import Footer from './Footer';\n\nexport default Footer; ","import React from 'react';\n\nimport Header from '../Header';\nimport Footer from '../Footer';\n\nimport { observer } from 'mobx-react-lite';\n\nconst Layout = observer(({ children }) => (\n    <div className=\"Layout\">\n        <Header/>\n        {children}\n        <Footer/>\n    </div>  \n));\n\nexport default Layout; ","import Layout from './Layout';\n\nexport default Layout; ","import React from 'react';\n// import PropTypes from 'prop-types';\n\nimport { Helmet } from 'react-helmet-async';\n\nconst NotFound = ({ message }) => {\n    return (\n        <>\n            <Helmet>\n                <title>404</title>\n            </Helmet>\n\n            <div>\n                <h1>404</h1>\n                <p>{message}</p> \n            </div>\n        </>\n    );\n};\n\nNotFound.defaultProps = {\n    message: 'The page could not be found'\n};\n\n\nexport default NotFound;","import NotFound from './NotFound';\n\nexport default NotFound; ","import React from 'react';\n// import PropTypes from 'prop-types';\n\nimport { Helmet } from 'react-helmet-async';\n\nconst Error = ({ code = '500', message }) => {\n    return (\n        <>\n            <Helmet>\n                <title>Error {code}</title>\n            </Helmet>\n\n            <div>\n                <h1>Error - {code}</h1>\n                <p>{message}</p> \n            </div>\n        </>\n    );\n};\n\nError.defaultProps = {\n    message: 'The page could not be found'\n};\n\n\nexport default Error;","import Error from './Error';\n\nexport default Error; ","import React from 'react';\n\nconst RawHtml = ({html, ...props}) => (\n    <div dangerouslySetInnerHTML={{__html: html}}></div>\n);\n\nexport default RawHtml; ","import RawHtml from './RawHtml';\n\nexport default RawHtml; \n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Helmet } from 'react-helmet-async';\nimport RawHtml from '../../components/RawHtml';\n\nimport {getDate as getServerSideDate} from '../../services/cms';\n\nconst Start = observer(({ pageData, initialProps }) => {\n    const { date } = initialProps;\n    const { title, content, featuredImage } = pageData; \n    \n    return (\n        <>\n            <Helmet>\n                <title>Start Page</title>\n            </Helmet>\n            <div>\n                <h1>Start page: {title}</h1>\n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n\n                <p>date initial prop: {date}</p>\n\n                <RawHtml html={content} />                \n            </div>\n        </>\n    );\n});\n\nStart.getInitialProps = async () => {\n    let resp = await getServerSideDate(); \n\n    return {\n        date: resp.data['date']\n    }\n};\n\nexport default Start;\n","import Start from './Start';\n\nexport default Start; ","import React from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { Helmet } from 'react-helmet-async';\n\nimport RawHtml from '../../components/RawHtml';\n\nimport { useForceSsrLoad } from '../../hooks';\n\nconst Page = observer(({ pageData }) => {\n    const { title, content, featuredImage } = pageData; \n\n    const willReload = useForceSsrLoad();\n    if (willReload) {\n        return null;\n    }\n\n    return (\n        <>\n            <Helmet>\n                <title>Page</title>\n            </Helmet>\n            <div>\n                <h1>A page: {title}</h1>\n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n                \n                <RawHtml html={content} />\n            </div>\n\n        </>\n    );\n}); \n\nexport default Page;\n","import Page from './Page';\n\nexport default Page; ","import React from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { Helmet } from 'react-helmet-async';\n\nimport RawHtml from '../../components/RawHtml';\n\nconst Post = observer(({ pageData }) => {\n    const { title, content, featuredImage } = pageData;\n\n   return  (\n        <>\n            <Helmet>\n                <title>Post</title>\n            </Helmet>\n            <div>\n                <h1>A poooost: {title}</h1>\n                \n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n\n                <RawHtml html={content} />\n            </div>\n        </>\n   );\n});\n\nexport default Post;\n","import Post from './Post';\n\nexport default Post; ","import React from 'react';\n\nimport './UnknownBlock.scss';\n\nconst UnknownBlock = ({ missingComponentId }) => {\n    return (\n        <div className=\"UnknownBlock\">\n            Could not find block with id: \"{missingComponentId}\"\n        </div>\n    );\n}; \n\nexport default UnknownBlock; ","import UnknownBlock from './UnknownBlock';\nexport default UnknownBlock; ","import React from 'react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Link } from 'react-router-dom';\n\nimport './BlurbFull.scss';\n\nconst BlurbFull = observer(({ title, image, link }) => {\n    return (\n        <div className=\"BlurbFull\">\n            <h1>{title}</h1>\n            \n            {image && \n                <img src={image} />\n            }\n\n            <Link to={link.url}>\n                Click here\n            </Link>\n        </div>\n    );\n}); \n\nexport default BlurbFull; ","import BlurbFull from './BlurbFull';\nexport default BlurbFull; ","import React from 'react';\nimport { observer } from 'mobx-react-lite';\n\nimport { Link } from 'react-router-dom';\n\nimport './BlurbBg.scss';\n\nconst BlurbBg = observer(({ title, image, link }) => {\n    return (\n        <div \n            style={{backgroundImage: `url('${image}')`}}\n            className=\"BlurbBg\"\n        >\n            <Link to={link.url}>\n                Click here\n            </Link>\n        </div>\n    );\n}); \n\nexport default BlurbBg; ","import BlurbBg from './BlurbBg';\nexport default BlurbBg; ","import React from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { debug } from '../../utils';\n\nimport UnknownBlock from '../../blocks/UnknownBlock';\nimport BlurbFull from '../../blocks/BlurbFull';\nimport BlurbBg from '../../blocks/BlurbBg';\n\nconst blockComponents = {\n    'blurb_full': BlurbFull,\n    'blurb_bg': BlurbBg\n};\n\n//\nconst Blocks = observer(({ items }) => {\n    debug('Blocks> passed block items: ', items);\n\n    if(!items || !items.length) {\n        return null; \n    }\n\n    return (\n        <div className=\"Blocks\">\n            {items.map((block, i) => {\n                const { acfFcLayout, ...props } = block; \n\n                if (!(acfFcLayout in blockComponents)) {\n                    return <UnknownBlock key={i} missingComponentId={acfFcLayout} />;\n                }\n                \n                const Block = blockComponents[acfFcLayout];\n\n                debug(`Blocks> found block component for ${acfFcLayout}: `, Block);\n                debug('Blocks> passing block props: ', props); \n\n                return <Block key={i} {...props} />; \n            })}\n        </div>\n    );\n}); \n\nexport default Blocks; ","import Blocks from './Blocks';\nexport default Blocks; ","import React from 'react';\n\nimport { observer } from 'mobx-react-lite';\nimport { Helmet } from 'react-helmet-async';\n\nimport Blocks from '../../layout/Blocks';\nimport RawHtml from '../../components/RawHtml';\n\nimport * as cms from '../../services/cms';\n\nconst Recipe = observer(({ loading, id, url, pageData, initialProps }) => {\n    const { title, content, featuredImage, recipeScore, recipeCategory, blocks } = pageData; \n    const { date } = initialProps; \n    \n    return (\n        <>\n            <Helmet>\n                <title>{`Recipe Page - ${title || ''}`}</title>\n            </Helmet>\n            <div>\n                {loading &&\n                    <h1>LOADING PAGE & PROPS!</h1>\n                }\n\n                <h1>Recept: {title}</h1>\n                <h3>date initial prop: {date}</h3>\n\n                {recipeCategory && \n                    <>\n                        <h4>Recipe categories: </h4>\n                        {recipeCategory.map((cat) =>\n                            <p key={cat.slug}>{cat.name}</p>\n                        )}\n                    </>\n                }\n\n                <h4>Score: {recipeScore ? recipeScore : 'missing'}</h4>\n\n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n                \n                <p>id: {id}</p>\n                <p>url: {url}</p>\n\n                <RawHtml html={content} />\n\n                {blocks && \n                    <Blocks items={blocks} />                \n                }\n            </div>\n        </>\n    );\n});\n\nRecipe.getInitialProps = async () => {\n    const resp = await cms.getDate(); \n\n    return {\n        date: resp.data['date']\n    }\n};\n\nexport default Recipe;","import Recipe from './Recipe';\n\nexport default Recipe; ","import React from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\nimport { Helmet } from 'react-helmet-async';\n\nimport RawHtml from '../../components/RawHtml';\n\nimport * as cms from '../../services/cms';\n\nimport { useStore } from '../../store';\n\nconst RecipeList = observer(({ loading, pageData, initialProps }) => {\n    const store = useStore(); \n\n    const { title, content, featuredImage } = pageData; \n    const { recipes, recipeCategories } = initialProps; \n\n    const recipesBycategoryUrl = store.getRouteByComponentName('RecipeListCategoryListing');\n\n    return (\n        <>\n            <Helmet>\n                <title>{`RecipeList Page - ${title || ''}`}</title>\n            </Helmet>\n            <div>\n                {loading &&\n                    <h1>LOADING PAGE & PROPS!</h1>\n                }\n\n                <h1>Recipe list page: {title}</h1>\n\n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n                \n                <RawHtml html={content} />\n\n                <h2>Available recipe categories</h2>\n                {recipeCategories && recipeCategories.length &&\n                    <ul>\n                        {recipeCategories.map(category =>\n                            <li key={category.id}>\n                                <Link to={`${recipesBycategoryUrl}${category.slug}`}>\n                                    {category.name}\n                                </Link>\n                            </li>\n                        )}\n                    </ul>\n                }\n\n                <h2>All recipes</h2>\n                {recipes && recipes.length && \n                    <ul>\n                        {recipes.map(recipe =>\n                            <li key={recipe.slug}>\n                                <Link to={recipe.url}>\n                                    {recipe.title}\n                                </Link>\n                            </li>\n                        )}\n                    </ul>\n                }\n\n            </div>\n        </>\n    );\n});\n\nRecipeList.getInitialProps = async () => {\n    const [recipes, recipeCategories] = await Promise.all([\n        cms.getPages('recipe'),\n        cms.getTaxonomyCategories('recipe_category')\n    ]);\n\n    return {\n        recipes,\n        recipeCategories\n    }\n};\n\nexport default RecipeList;","import RecipeList from './RecipeList';\n\nexport default RecipeList; ","import React from 'react';\n\nimport { \n    Link,\n    Redirect\n} from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\nimport { Helmet } from 'react-helmet-async';\n\nimport RawHtml from '../../components/RawHtml';\n\nimport * as cms from '../../services/cms';\n\nimport { \n    defined, \n    debug,\n    runningInBrowser\n} from '../../utils';\n\nimport { useStore } from '../../store';\n\nconst RecipeListCategoryListing = observer(({ loading, pageData, initialProps, urlParams }) => {\n    const store = useStore(); \n\n    const { categorySlug } = urlParams; \n    const { title, content, featuredImage } = pageData; \n    const { category = {}, categoryPages = [] } = initialProps; \n\n    if (!defined(categorySlug)) {\n        const parentUrl = store.getRouteByComponentName('RecipeList');\n\n        return (\n            <Redirect to={parentUrl} />\n        );\n    }\n\n    return (\n        <>\n            <Helmet>\n                <title>{`RecipeListCategoryListing Page - ${title || ''}`}</title>\n            </Helmet>\n            <div>\n                {loading &&\n                    <h1>LOADING PAGE & PROPS!</h1>\n                }\n\n                <h1>{title} - {category.name}</h1>\n                <p>{category.description}</p>\n\n                <RawHtml html={content} />\n\n                {featuredImage &&\n                    <img src={featuredImage.sizes.thumbnail.url} />\n                }\n\n                {!loading &&\n                    <>\n                        <h2>Pages in this category: </h2>\n                        {categoryPages.length\n                            ? categoryPages.map(page =>\n                                <Link key={page.slug} to={page.url}>\n                                    {page.title}\n                                </Link>\n                            )\n                            : 'No recipes found :('\n                        }\n                    </>\n                }\n\n            </div>\n        </>\n    );\n});\n\nRecipeListCategoryListing.routeOptions = {\n    params: ':categorySlug*'\n};\n\nRecipeListCategoryListing.getInitialProps = async ({ urlParams }) => {\n    const { categorySlug } = urlParams; \n\n    if(!defined(categorySlug)) {\n        return {}; \n    }\n\n    const category = await cms.getTaxonomyCategorySlug('recipe_category', categorySlug);    \n    const categoryPages = await cms.getPagesInCategory('recipe', 'recipe_category', category.id);\n\n    return {\n        category, \n        categoryPages\n    }\n};\n\nexport default RecipeListCategoryListing;","import RecipeListCategoryListing from './RecipeListCategoryListing';\n\nexport default RecipeListCategoryListing; ","import React from 'react';\n\nimport { \n    Switch, \n    Route, \n    withRouter,\n} from 'react-router-dom';\n\nimport { observer } from 'mobx-react-lite';\nimport { useStore } from './store';\n\nimport { \n    usePrevious, \n} from './hooks';\n\nimport Layout from './layout/Layout';\nimport NotFound from './pages/NotFound';\nimport Error from './pages/Error';\n\nimport Start from './pages/Start';\nimport Page from './pages/Page';\nimport Post from './pages/Post';\nimport Recipe from './pages/Recipe';\nimport RecipeList from './pages/RecipeList';\nimport RecipeListCategoryListing from './pages/RecipeListCategoryListing';\n\nimport { \n    defined, \n    definedNotNull,\n    debug \n} from './utils';\n\nconst pageComponents = {\n    'Start': Start, \n    'Page': Page, \n    'Post': Post, \n    'Recipe': Recipe,\n    'RecipeList': RecipeList,\n    'RecipeListCategoryListing': RecipeListCategoryListing\n};\n\nconst updateWpAdminBarEditButtonWithId = (pageId) => {\n    const wrapEl = document.getElementById('wp-admin-bar-edit');\n    if(!wrapEl) {\n        return; \n    }\n\n    const linkEl = wrapEl.getElementsByTagName('a')[0];\n    const editUrl = linkEl.href;\n\n    const editRegex = /(.*)(post=)(\\d+)(.*)/;\n    if (editUrl.match(editRegex)) {\n        const updatedEditUrl = editUrl.replace(editRegex, `$1$2${pageId}$4`);\n        linkEl.href = updatedEditUrl;\n        debug('App> updateWpAdminBarEditButtonWithId() - updating edit button id to: ', pageId);\n    }\n}\n\nconst LocationSwitch = withRouter((props) => {    \n    const store = useStore();\n\n    const { children } = props; \n    const prevProps = usePrevious(props);\n\n    // check whether user has navigated or whether this is the initial load without a hydrated store \n    // if yes, set location to changed in order to trigger page data & initial props load \n    // for route (see renderRoute()) \n\n    if ((prevProps && prevProps.location.pathname !== props.location.pathname) \n        || (!prevProps && !store.serverSideBootstrapped)) \n    {\n        debug('LocationSwitch> setting location changed state to: ', true);\n\n        store.setLocationChanged(true);\n    } else {\n        debug('LocationSwitch> setting location changed state to: ', false);\n        debug('LocationSwitch> was ssr bootstrapped: ', store.serverSideBootstrapped);\n\n        store.setLocationChanged(false);\n    }\n\n    return (\n        <Switch>\n            {children}\n        </Switch>\n    ); \n}); \n\nconst App = observer(({ ssr = false }, ref) => {\n    let store = useStore();\n\n    // trigger a rerender when these props are changed\n    store.loadingPageAndProps;\n    store.pageData;\n    store.pageInitialProps;\n\n    if(store.state === store.states.loading) {\n        return (\n            <div>Loading...</div>\n        );\n    }\n\n    if (store.state === store.states.error) {\n        return (\n            <div>\n                <h3>An error occured:</h3> \n                <code>{store.getError()}</code>\n            </div>\n        );\n    }\n\n    const renderRoute = (props, route) => {\n        const urlParams = props.match.params; \n\n        debug('App> renderRoute() called, url params received: ', urlParams);\n        debug('App> has location changed?', store.locationChanged);\n\n        let PageComponent = pageComponents[route.component];\n\n        if(!defined(PageComponent)) {\n            const message = `Could not render page - no React component mapped to name \"${route.component}\" could be found!`; \n            \n            console.error(`App> ${message}`);\n\n            PageComponent = () => (\n                <Error \n                    code=\"501\"\n                    message={message} \n                />\n            );\n        }\n\n        // expose promises in ref (enables us to wait for \n        // data load when doing ssr, see server/lib/ssr/index.js)\n\n        if(ref && defined(ref.current) && ref.current === null) { // ssr\n            debug('App> renderRoute is triggering SSR data & props load procedure - will not render this run'); \n\n            ref.current = {\n                contentPromise: store.loadContentAndInitialProps(\n                    route.id, \n                    route.postType, \n                    urlParams, \n                    PageComponent.getInitialProps\n                )\n            };\n\n            // don't render anything here, just trigger the promise \n            // the ssr renderer will trigger a new render when the promise is resolved\n\n            return null; \n        } else if(!ssr && store.locationChanged) { // client \n            debug('App> renderRoute is triggering CLIENT data & props load procedure'); \n\n            store.loadContentAndInitialProps(\n                route.id, \n                route.postType, \n                urlParams, \n                PageComponent.getInitialProps\n            );\n\n            updateWpAdminBarEditButtonWithId(route.id);\n        }\n\n        debug('App> current loaded pageData: ', store.pageData);\n        debug('App> passing query params to page component: ', store.currentQuery);\n        debug('App> passing url params to page component: ', urlParams);\n\n        return (\n            <PageComponent\n                id={route.id}\n                type={route.postType}\n                url={route.url}\n\n                loading={store.loadingPageAndProps}\n                pageData={store.pageData}\n                initialProps={store.pageInitialProps}\n                pageQuery={store.currentQuery}\n                urlParams={urlParams}\n\n                {...props}\n            />\n        );\n    };\n\n    return (\n        <Layout>\n            <LocationSwitch ssr={ssr}>\n                {store.routes.map(route => {\n                    // check if this component is configured to accept url params, i.e.:\n                    // ':categorySlug*/:name*'\n\n                    const componentAcceptsUrlParams = defined(pageComponents[route.component])\n                        && definedNotNull(pageComponents[route.component].routeOptions);\n\n                    const path = componentAcceptsUrlParams\n                        ? `${route.url}${pageComponents[route.component].routeOptions.params}`\n                        : route.url;\n\n                    if (componentAcceptsUrlParams) {\n                        debug(`App> routing component ${route.component} with url params: ${route.url}${pageComponents[route.component].routeOptions.params}`);\n                    }\n\n                    return (\n                        <Route\n                            exact={!componentAcceptsUrlParams}\n                            key={route.url}\n                            path={path}\n                            render={(props) =>\n                                renderRoute(props, route)\n                            }\n                        />\n                    );\n                })}\n                <Route component={NotFound} />\n            </LocationSwitch>\n        </Layout>\n    );\n\n}, { forwardRef: true });\n\nexport default App;\n","import React, {\n    createRef,\n} from 'react';\n\nimport ReactDOMServer from 'react-dom/server';\n\nimport { useStaticRendering } from 'mobx-react-lite';\n\nimport { HelmetProvider } from 'react-helmet-async';\nimport { StaticRouter } from 'react-router-dom';\n\nimport { \n    StoreProvider, \n    Store, \n    dehydrate \n} from '../../../app/store';\n\nimport App from '../../../app/App';\n\nimport { debug }  from '../../../app/utils';\n\nuseStaticRendering(true);\n\nconst ssrRenderer = async (req, res) => {\n    debug(`\\n\\nSSR renderer: rendering url \"${req.originalUrl}\"`)\n    let appRef = createRef(null);\n\n    const context = {};\n    const helmetContext = {};\n    \n    const store = new Store(); \n\n    debug('SSR renderer: calling store bootstrap!');\n    await store.bootstrap();\n\n    debug('SSR renderer: received query params: ', req.query);\n    store.setQueryParams(req.query)\n\n    const component = (\n        <StoreProvider store={store}>\n            <HelmetProvider context={helmetContext}>\n                <StaticRouter\n                    location={req.originalUrl}\n                    context={context}\n                >\n                    <App \n                        ssr={true}\n                        ref={appRef}    \n                    />\n                </StaticRouter>\n            </HelmetProvider>\n        </StoreProvider>\n    );\n\n\n    // render once to trigger router & content data load, then await \n    // data load promise exposed by the <App> ref & re-render with loaded data.\n\n    let app = '';\n    ReactDOMServer.renderToString(component);\n    if (appRef.current && appRef.current.contentPromise) {\n        debug('SSR Renderer: waiting for content promise!');\n        await appRef.current.contentPromise;\n\n        debug('SSR Renderer: content promise resolved!');\n        app = ReactDOMServer.renderToString(component);\n    }\n\n    store.setServerSideBootstrapped(true);\n\n    const html = `\n        <div id=\"root\">${app}</div>\n        <script>\n            window.__FROJD_STATE = '${dehydrate(store)}';\n        </script>\n    `;\n\n    if (context.url) {\n        debug('SSR renderer: 301 redirect triggered by react-router!');\n        debug(`SSR renderer: redirecting to \"${context.url}\"`);\n\n        res.writeHead(301, { Location: context.url });\n        res.end();\n    } else {\n        debug('SSR renderer: responding with rendered html!');\n        res.send(html);\n    }\n};\n\nexport default ssrRenderer;","import express from 'express';\nimport path from 'path';\nimport log from 'llog';\n\nimport ssr from './lib/ssr';\n\nconst port = process.env.PORT || 1234;\n\nconst server = express();\nconst serveStatic = express.static;\n\nserver.use(\n    '/dist/client',\n    serveStatic(path.resolve(process.cwd(), '__dist', 'client'))\n);\n\nserver.get('/*', ssr);\n\nserver.listen(port, () => {\n    log.info(`Listening on port ${port} - have fun!`)\n});"]}